# Extension Stample

## Description

This is the browser extension for Stample.

## Requirements

- Node.js
- yarn
- Chrome, Opera, Edge or Firefox

## Compatibility

The extension is compatible with the following browsers:
| Browser |
| --- |
| Chrome |
| Opera |
| Edge |
| Firefox |

## Installation

## Install an extension locally in your browser

Based on the browser you're using, follow the instructions below to install the extension locally in your browser.

### Chrome, Opera, Edge

Build the extension by either by following the instructions in the [
Development](#development) section or [Production](#production) section, later in this document.

- ##### Chrome

1.  Go to `chrome://extensions/` in Chrome
2.  Enable developer mode by toggling the switch in the top right corner
3.  Click on `Load unpacked` and select the `dist/v3` folder that was generated by.

- ##### Opera

1.  Go to `opera://extensions/` in Opera
2.  Enable developer mode by toggling the switch in the top right corner
3.  Click on `Load unpacked` and select the `dist/v3` folder that was generated.

- ##### Edge

1.  Go to `edge://extensions/` in Edge
2.  Enable developer mode by toggling the switch in the bottom left corner
3.  Click on `Load unpacked` and select the `dist/v3` folder that was generated.

### Firefox

1. Go to `about:debugging#/runtime/this-firefox` in Firefox
2. Click on `Load Temporary Add-on...` and select the `dist/v2` folder that was generated.

### Development

We first run the extension using yarn dev, which will output an extension, that can then be imported inside your browser as an unpacked extension.

1. Run `yarn install`

- #### Chrome, Opera, Edge

  1. Run `yarn watch`
  2. The extension will be generated in the `dist/v3` folder
  3. Follow the instructions in the [Install an extension locally in your browser](#install-an-extension-locally-in-your-browser) section

- #### Firefox
  1. Run `yarn watch:v2`
  2. The extension will be generated in the `dist/v2` folder
  3. Follow the instructions in the [Install an extension locally in your browser](#install-an-extension-locally-in-your-browser) section

4. The extension should now be loaded and you should be able to see it in the extensions list
5. Activate the extension like any other extension

You can now make changes to the extension and they will be automatically reloaded in the browser.

### Production

1. Run `yarn install`

- #### Chrome, Opera, Edge
  1.  Run `yarn build`
  2.  The extension will be generated in the `dist/v3` folder
- #### Firefox
  1. Run `yarn build:v2`
  2. The extension will be generated in the `dist/v2` folder

2. Follow the instructions in the [Install an extension locally in your browser](#install-an-extension-locally-in-your-browser) section
3. The extension should now be loaded and you should be able to see it in the extensions list
4. Activate the extension like any other extension

### Export to extensions stores

TODO

## Content

### Manifest

The manifest file determines the name, version, description, icons, permissions, and other properties of the extension. It also declares which scripts and assets run on which pages.
You can change it in `manifest.ts`

#### Versions

There are 2 manifest versions for the multiple browsers: v2 and v3. The v2 is used for Chrome, Opera and Edge, while the v3 is used for Firefox.
Both are in the same file, with most of the properties shared between the two versions. The properties that are different are in the ManifestV2 and ManifestV3 objects.

### Content Script

Content scripts are javascript pages that are injected inside web pages. We use them to inject Stample content inside Google.com search page.
You can change it in `src/pages/content/`

### Background Script

Background scripts are javascript pages that run in the background of the extension. We use them to handle the communication between the content script and the popup. We mainly use it to access the google chrome storage.
You can change it in `src/pages/background/`

### Popup

The popup is the page that is displayed when you click on the extension icon. We use it to display the Stample popup.
You can change it in `src/pages/popup/`
