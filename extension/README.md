# Extension Stample

## Description

This is the browser extension for Stample.

## Requirements

- Node.js
- yarn
- Chrome, Opera, Edge or Firefox

## Compatibility

The extension is compatible with the following browsers:
| Browser |
| --- |
| Chrome |
| Opera |
| Edge |
| Firefox |

## Installation

### Development

We first run the extension using yarn dev, which will output an extension, that can then be imported inside your browser as an unpacked extension.

1. Run `yarn install`

- #### Chrome, Opera, Edge

  2. Run `yarn watch`

  - ##### Chrome
    3. Go to `chrome://extensions/` in Chrome
    4. Enable developer mode by toggling the switch in the top right corner
    5. Click on `Load unpacked` and select the `dist` folder that was generated by `yarn watch`
  - ##### Opera
    3. Go to `opera://extensions/` in Opera
    4. Enable developer mode by toggling the switch in the top right corner
    5. Click on `Load unpacked` and select the `dist` folder that was generated by `yarn watch`
  - ##### Edge
    3. Go to `edge://extensions/` in Edge
    4. Enable developer mode by toggling the switch in the bottom left corner
    5. Click on `Load unpacked` and select the `dist` folder that was generated by `yarn watch`

- #### Firefox
  2. Run `yarn watch:v2`
  3. Go to `about:debugging#/runtime/this-firefox` in Firefox
  4. Click on `Load Temporary Add-on...` and select the `dist` folder that was generated by `yarn watch:v2`

6. The extension should now be loaded and you should be able to see it in the extensions list
7. Activate the extension like any other extension

You can now make changes to the extension and they will be automatically reloaded in the browser.

### Production

TODO

## Content

### Manifest

The manifest file determines the name, version, description, icons, permissions, and other properties of the extension. It also declares which scripts and assets run on which pages.
You can change it in `manifest.ts`

#### Versions

There are 2 manifest versions for the multiple browsers: v2 and v3. The v2 is used for Chrome, Opera and Edge, while the v3 is used for Firefox.
Both are in the same file, with most of the properties shared between the two versions. The properties that are different are in the ManifestV2 and ManifestV3 objects.

### Content Script

Content scripts are javascript pages that are injected inside web pages. We use them to inject Stample content inside Google.com search page.
You can change it in `src/pages/content/`

### Background Script

Background scripts are javascript pages that run in the background of the extension. We use them to handle the communication between the content script and the popup. We mainly use it to access the google chrome storage.
You can change it in `src/pages/background/`

### Popup

The popup is the page that is displayed when you click on the extension icon. We use it to display the Stample popup.
You can change it in `src/pages/popup/`
